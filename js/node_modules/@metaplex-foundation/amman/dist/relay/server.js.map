{"version":3,"file":"server.js","sourceRoot":"","sources":["../../src/relay/server.ts"],"names":[],"mappings":";;;AAAA,oEAwB0C;AAC1C,6CAAiE;AACjE,+BAAyD;AAEzD,yCAA0C;AAC1C,qDAAuD;AACvD,6CAAiD;AACjD,sCAAsE;AAEtE,oCAAoC;AACpC,wCAAiD;AACjD,4CAGqB;AAErB,mCAAuC;AAEvC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAA,iBAAS,EAAC,OAAO,CAAC,CAAA;AAE3D;;;;;GAKG;AACH,MAAM,WAAW;IACf,YACW,EAAU,EACV,UAAsB,EACtB,eAAgC,EAChC,gBAAkC,EAClC,iBAAmC,EACpC,aAA4B;IACpC,qBAAqB;IACJ,iBAAyC,EAAE;QAPnD,OAAE,GAAF,EAAE,CAAQ;QACV,eAAU,GAAV,UAAU,CAAY;QACtB,oBAAe,GAAf,eAAe,CAAiB;QAChC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,sBAAiB,GAAjB,iBAAiB,CAAkB;QACpC,kBAAa,GAAb,aAAa,CAAe;QAEnB,mBAAc,GAAd,cAAc,CAA6B;QAE5D,IAAI,CAAC,oBAAoB,EAAE,CAAA;IAC7B,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,MAAM,EAAE,EAAE;YAClC,MAAM,MAAM,GAAG,GAAG,MAAM,CAAC,EAAE,SAAS,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,CAAA;YACtE,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,GAAG,EAAE,CAC3B,QAAQ,CAAC,aAAa,MAAM,eAAe,CAAC,CAC7C,CAAA;YACD,QAAQ,CAAC,aAAa,MAAM,YAAY,CAAC,CAAA;YACzC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAA;QAC3B,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,YAAY,CAAC,MAAc;QACzB,MAAM,uBAAuB,GAAG,IAAI,GAAG,EAAU,CAAA;QACjD,MAAM;aACH,EAAE,CAAC,wCAAyB,EAAE,CAAC,MAA8B,EAAE,EAAE;YAChE,IAAI,QAAQ,CAAC,OAAO,EAAE;gBACpB,QAAQ,CAAC,wCAAyB,CAAC,CAAA;gBACnC,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAA;gBAC7C,QAAQ,CAAC,OAAO,UAAU,2BAA2B,CAAC,CAAA;aACvD;YACD,KAAK,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC/C,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,GAAG,CAAA;aAC/B;YACD,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;YACrD,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,wCAAyB,EAAE,MAAM,CAAC,CAAA;YACxD,MAAM,CAAC,IAAI,CAAC,wCAAyB,CAAC,CAAA;QACxC,CAAC,CAAC;aACD,EAAE,CAAC,2CAA4B,EAAE,GAAG,EAAE;YACrC,IAAI,QAAQ,CAAC,OAAO,EAAE;gBACpB,QAAQ,CAAC,2CAA4B,CAAC,CAAA;gBACtC,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAA;gBAC1D,QAAQ,CAAC,WAAW,UAAU,qCAAqC,CAAC,CAAA;aACrE;YACD,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;QAC7D,CAAC,CAAC;aACD,EAAE,CAAC,yCAA0B,EAAE,CAAC,MAAc,EAAE,EAAE;;YACjD,QAAQ,CAAC,yCAA0B,EAAE,MAAM,CAAC,CAAA;YAC5C,MAAM,MAAM,GAAG,MAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,0CAAE,WAAW,CAAA;YAC1D,MAAM,CAAC,IAAI,CAAC,yCAA0B,EAAE,MAAM,EAAE,MAAM,aAAN,MAAM,cAAN,MAAM,GAAI,EAAE,CAAC,CAAA;YAC7D,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;gBACxC,uBAAuB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;gBACnC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,mBAAmB,MAAM,EAAE,EAAE,CAAC,MAAM,EAAE,EAAE;oBAC5D,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;oBACtD,QAAQ,CAAC,wCAAyB,CAAC,CAAA;gBACrC,CAAC,CAAC,CAAA;aACH;QACH,CAAC,CAAC;aACD,EAAE,CAAC,uCAAwB,EAAE,KAAK,EAAE,MAAc,EAAE,IAAa,EAAE,EAAE;YACpE,QAAQ,CAAC,uCAAwB,EAAE,MAAM,CAAC,CAAA;YAC1C,IAAI;gBACF,IAAI,IAAI,CAAA;gBACR,IAAI,IAAI,IAAI,IAAI,EAAE;oBAChB,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;iBAC3D;gBACD,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,WAAW,CACzD,IAAI,mBAAS,CAAC,MAAM,CAAC,EACrB,IAAI,CAAC,eAAe,CAAC,UAAU,EAC/B,IAAI,CACL,CAAA;gBACD,MAAM,CAAC,IAAI,CAAC,uCAAwB,EAAE,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,CAAA;aAC/D;YAAC,OAAO,GAAG,EAAE;gBACZ,MAAM,CAAC,IAAI,CAAC,uCAAwB,EAAE,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,CAAA;aACvD;QACH,CAAC,CAAC;aACD,EAAE,CAAC,wCAAyB,EAAE,KAAK,EAAE,KAAa,EAAE,EAAE;YACrD,QAAQ,CAAC,wCAAyB,EAAE,KAAK,CAAC,CAAA;YAC1C,IAAI;gBACF,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,mBAAmB,EAAE,CAAA;gBAC1D,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CACvD,KAAK,EACL,SAAS,EACT,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,aAAa,CAAC,WAAW,CAC/B,CAAA;gBACD,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,EAAE,WAAW,EAAE,CAAC,CAAA;aACxD;YAAC,OAAO,GAAQ,EAAE;gBACjB,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAA;aAChE;QACH,CAAC,CAAC;aACD,EAAE,CAAC,wCAAyB,EAAE,KAAK,EAAE,KAAa,EAAE,EAAE;YACrD,QAAQ,CAAC,wCAAyB,EAAE,KAAK,CAAC,CAAA;YAC1C,IAAI;gBACF,MAAM,EACJ,qBAAqB,EACrB,6BAA6B,EAC7B,QAAQ,GACT,GAAG,MAAM,IAAA,wCAA4B,EAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAA;gBAE9D,MAAM,YAAY,GAAG,IAAA,iCAAwB,EAAC;oBAC5C,GAAG,qBAAqB;oBACxB,GAAG,6BAA6B;iBACjC,CAAC,CAAA;gBAEF,IAAI,CAAC,aAAa,GAAG,qBAAa,CAAC,cAAc,CAC/C,IAAI,CAAC,eAAe,CAAC,UAAU,EAC/B,IAAI,CAAC,eAAe,EACpB,YAAY,EACZ,QAAQ,CACT,CAAA;gBAED,MAAM,CAAC,IAAI,CAAC,wCAAyB,CAAC,CAAA;aACvC;YAAC,OAAO,GAAQ,EAAE;gBACjB,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAA;aACvD;QACH,CAAC,CAAC;aACD,EAAE,CAAC,wCAAyB,EAAE,CAAC,EAAU,EAAE,SAAqB,EAAE,EAAE;YACnE,QAAQ,CAAC,wCAAyB,EAAE,EAAE,CAAC,CAAA;YACvC,IAAI;gBACF,MAAM,OAAO,GAAG,iBAAO,CAAC,aAAa,CAAC,SAAS,CAAC,CAAA;gBAChD,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;gBAC5C,MAAM,CAAC,IAAI,CAAC,wCAAyB,CAAC,CAAA;gBACtC,QAAQ,CAAC,wCAAyB,CAAC,CAAA;aACpC;YAAC,OAAO,GAAQ,EAAE;gBACjB,QAAQ,CAAC,GAAG,CAAC,CAAA;gBACb,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAA;aACvD;QACH,CAAC,CAAC;aACD,EAAE,CAAC,uCAAwB,EAAE,CAAC,EAAU,EAAE,EAAE;YAC3C,QAAQ,CAAC,uCAAwB,EAAE,EAAE,CAAC,CAAA;YACtC,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,EAAE,CAAC,CAAA;YACrD,MAAM,CAAC,IAAI,CAAC,uCAAwB,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,SAAS,CAAC,CAAA;QAC3D,CAAC,CAAC;aACD,EAAE,CAAC,sCAAuB,EAAE,KAAK,EAAE,OAA6B,EAAE,EAAE;YACnE,QAAQ,CAAC,sCAAuB,CAAC,CAAA;YACjC,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,mBAAmB,EAAE,CAAA;YAC1D,MAAM,IAAA,gDAAoC,EACxC,IAAI,CAAC,UAAU,EACf,SAAS,EACT,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,aAAa,CAAC,WAAW,EAC9B,IAAI,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CACrC,CAAA;YACD,MAAM,EACJ,qBAAqB,EACrB,6BAA6B,EAC7B,QAAQ,GACT,GAAG,MAAM,IAAA,gDAAoC,EAC5C,IAAI,CAAC,UAAU,EACf,SAAS,EACT,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,aAAa,CAAC,WAAW,EAC9B,IAAI,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CACrC,CAAA;YAED,MAAM,YAAY,GAAG,IAAA,iCAAwB,EAAC;gBAC5C,GAAG,qBAAqB;gBACxB,GAAG,6BAA6B;aACjC,CAAC,CAAA;YAEF,IAAI,CAAC,aAAa,GAAG,qBAAa,CAAC,cAAc,CAC/C,IAAI,CAAC,eAAe,CAAC,UAAU,EAC/B,IAAI,CAAC,eAAe,EACpB,YAAY,EACZ,QAAQ,CACT,CAAA;YACD,MAAM,CAAC,IAAI,CAAC,sCAAuB,CAAC,CAAA;QACtC,CAAC,CAAC;aACD,EAAE,CAAC,wCAAyB,EAAE,GAAG,EAAE;YAClC,QAAQ,CAAC,wCAAyB,CAAC,CAAA;YACnC,MAAM,CAAC,IAAI,CAAC,wCAAyB,EAAE,qBAAa,CAAC,CAAA;QACvD,CAAC,CAAC,CAAA;IACN,CAAC;CACF;AAED;;;KAGK;AACL,MAAa,KAAK;IACR,MAAM,CAAC,SAAS,CACtB,UAAsB,EACtB,eAAgC,EAChC,gBAAkC,EAClC,iBAAmC,EACnC,aAA4B,EAC5B,WAAmC;QAEnC,MAAM,MAAM,GAAG,IAAA,mBAAY,GAAE,CAAA;QAC7B,MAAM,EAAE,GAAG,IAAI,kBAAM,CAAC,MAAM,EAAE;YAC5B,IAAI,EAAE;gBACJ,MAAM,EAAE,GAAG;aACZ;SACF,CAAC,CAAA;QACF,MAAM,WAAW,GAAG,IAAI,WAAW,CACjC,EAAE,EACF,UAAU,EACV,eAAe,EACf,gBAAgB,EAChB,iBAAiB,EACjB,aAAa,EACb,WAAW,CACZ,CAAA;QACD,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,CAAA;IACzC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,WAAW,CACtB,UAAsB,EACtB,gBAAsD,EACtD,gBAAyC,EACzC,QAAmB,EACnB,QAAmB,EACnB,kBAAoD,EACpD,cAAoC,EACpC,cAAsB,EACtB,YAAoB,EACpB,cAAuB,IAAI;QAM3B,IAAI,WAAW,EAAE;YACf,MAAM,IAAA,wBAAiB,EAAC,+BAAgB,CAAC,CAAA;SAC1C;QACD,MAAM,eAAe,GAAG,2BAAe,CAAC,UAAU,CAChD,gBAAgB,EAChB,gBAAgB,CACjB,CAAA;QACD,qBAAa,CAAC,cAAc,CAC1B,eAAe,CAAC,UAAU,EAC1B,eAAe,EACf,kBAAkB,EAClB,cAAc,CACf,CAAA;QACD,MAAM,gBAAgB,GAAG,IAAI,yBAAgB,CAC3C,cAAc,EACd,eAAe,CAAC,UAAU,CAC3B,CAAA;QACD,MAAM,iBAAiB,GAAG,IAAI,yBAAgB,CAC5C,YAAY,EACZ,eAAe,CAAC,UAAU,CAC3B,CAAA;QAED,MAAM,aAAa,GAAG,QAAQ;aAC3B,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC;aAC9B,MAAM,CAAC,CAAC,GAA2B,EAAE,CAAC,EAAE,EAAE;YACzC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAM,CAAA;YAC3B,OAAO,GAAG,CAAA;QACZ,CAAC,EAAE,EAAE,CAAC,CAAA;QAER,MAAM,aAAa,GAAG,QAAQ;aAC3B,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC;aAC9B,MAAM,CAAC,CAAC,GAA2B,EAAE,CAAC,EAAE,EAAE;YACzC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAM,CAAA;YAC3B,OAAO,GAAG,CAAA;QACZ,CAAC,EAAE,EAAE,CAAC,CAAA;QAER,MAAM,WAAW,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,aAAa,EAAE,CAAA;QAE1D,MAAM,EAAE,GAAG,EAAE,EAAE,EAAE,WAAW,EAAE,GAAG,KAAK,CAAC,SAAS,CAC9C,UAAU,EACV,eAAe,EACf,gBAAgB,EAChB,iBAAiB,EACjB,qBAAa,CAAC,QAAQ,EACtB,WAAW,CACZ,CAAA;QACD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACrC,GAAG,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,+BAAgB,EAAE,GAAG,EAAE;gBACpD,MAAM,IAAI,GAAG,GAAG,CAAC,OAAO,EAAiB,CAAA;gBACzC,MAAM,GAAG,GAAG,4BAA4B,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,EAAE,CAAA;gBACnE,QAAQ,CAAC,GAAG,CAAC,CAAA;gBACb,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,CAAA;YACnC,CAAC,CAAC,CAAA;QACJ,CAAC,CAAC,CAAA;IACJ,CAAC;CACF;AAlGD,sBAkGC"}